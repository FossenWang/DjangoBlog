{% extends 'blog\base.html' %}

{% block main %}
<article class="post post-{{ article.pk }}">
    <header class="entry-header">
        <h1 class="entry-title">{{ article.title }}</h1>
        <div class="entry-meta">
            <span class="post-category"><a href="{% url 'blog:category' article.category.name %}">{{ article.category.name }}</a></span>
            <span class="post-date"><a href="#"><time class="entry-date"
                                                      datetime="{{ article.pub_date }}">{{ article.pub_date }}</time></a></span>
            <span class="post-author"><a href="#">{{ article.author }}</a></span>
            <span class="comments-link"><a href="#comment">{{ article.comment_set.count }} 评论</a></span>
            <span class="views-count">{{ article.views }} 阅读</span>
            <br/>
            <span>标签: </span>
            {% for tag in article.tags.all %}
                <span><a href="{% url 'blog:tag' tag.pk %}">{{ tag.name }}</a></span>
            {% endfor %}
        </div>
    </header>
    <div class="entry-content clearfix">
        {{ article.content|safe }}
    </div>
</article>
<form action="{% url 'blog:article_comment' article.pk %}" method="post" class="comment-form">
    {% csrf_token %}
    <div class="row">
        <div class="col-md-4">
            <label for="{{ form.user.id_for_label }}">用户名：</label>
            {{ form.user }}
            {{ form.user.errors }}
        </div>
        <div class="col-md-12">
            <label for="{{ form.content.id_for_label }}">评论：</label>
            {{ form.content }}
            {{ form.content.errors }}
            <button type="submit" class="comment-btn">发表</button>
        </div>
    </div>    <!-- row -->
</form>
<ul class="comment-list list-unstyled" id='comment'>
    {% for comment in comment_list %}
    <li class="comment-item">
        <span class="nickname">{{ comment.user }}</span>
        <time class="submit-date">{{ comment.pub_date }}</time>
        <div class="content">
            {{ comment.content }}
        </div>
    </li>
    {% empty %}
    暂无评论
    {% endfor %}
</ul>
{% endblock main %}
{% block toc %}
<div class="widget widget-content">
    <h3 class="widget-title">文章目录</h3>
    {{ article.toc|safe }}
</div>
{% endblock toc %}
