{% load staticfiles %} {% load video_tags %} {% load training_tags %}
<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <title>Fossen的博客</title>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">
    <meta name="description" content="Fossen's blog">
    <meta name="author" content="Fossen">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.bootcss.com/bootstrap/4.0.0-beta.3/css/bootstrap.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.css" rel="Stylesheet">
    <link href="{% static 'public/css/style.css' %}" rel="stylesheet">

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
    <script src="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0-beta.3/js/bootstrap.js"></script>
</head>

<body>
    <header>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <nav class="navbar navbar-expand-lg">
                        <ul class="navbar-nav" id="menu">
                            <a class="logo" href="/">FOSSEN</a>
                            <li>
                                <a href="/">首页</a>
                            </li>
                            <li>
                                <a href="{% url 'blog:index' %}">文章</a>
                            </li>
                            <li>
                                <a href="{% url 'video:video list' 0 %}">视频</a>
                                {% get_video_categories as cates %}
                                <ul>
                                    {% for cate in cates %}
                                    <li>
                                        <a href="{% url 'video:video list' cate.number %}">{{ cate.name }}</a>
                                    </li>
                                    {% endfor %}
                                </ul>
                            </li>
                            <li>
                                <a href="{% url 'training:program_list' 0 %}">健身</a>
                                <ul>
                                    <li>
                                        <a href="{% url 'training:program_list' 0 %}">训练方案</a>
                                        {% get_program_types as ptypes %}
                                        <ul>
                                            {% for ptype in ptypes %}
                                            <li>
                                                <a href="{% url 'training:program_list' ptype.pk %}">{{ ptype.name }}</a>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="{% url 'training:exercise_list' 0 %}">动作库</a>
                                        {% get_exercise_types as etypes %}
                                        <ul>
                                            {% for etype, v in etypes.items %}
                                            <li>
                                                <a href="{% url 'training:exercise_list' v.1 %}">{{ etype }}</a>
                                                <ul>
                                                    {% for sort in v.0 %}
                                                    <li>
                                                        <a href="{% url 'training:exercise_list' sort.number %}">{{ sort.sort }}</a>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <form method="get" action="/search" id="search">
                                    <input name="q" type="text" size="40" placeholder="Search..." />
                                </form>
                                <div id="userbar">
                                    {% if user.is_authenticated %}
                                    <a>{{ user.username }}</a>
                                    <a href="{% url 'logout' %}">注销</a>
                                    {% else %}
                                    <a href="/accounts/login?next=/">登录</a>
                                    <a>注册</a>
                                    {% endif %}
                                </div>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <main>
        {% block main %} {% endblock main %}
    </main>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="copy-right">
                        <p><a href="#">Fossen</a>©2018</p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script type="text/javascript">
        /* 浮动内容 */
        $(window).scroll(function () {
            var bodyTop = 0,
                sideTop = $('.top-header').eq(0).height() + 10;
            if (typeof window.pageYOffset != 'undefined') {
                bodyTop = window.pageYOffset;
            } else if (typeof document.compatMode != 'undefined' && document.compatMode != 'BackCompat') {
                bodyTop = document.documentElement.scrollTop;
            } else if (typeof document.body != 'undefined') {
                bodyTop = document.body.scrollTop;
            }
            if (bodyTop > sideTop) {
                $('.float-widget').css({
                    'position': 'fixed',
                    'top': '10px',
                    'width': '374.6px'
                });
            } else {
                $('.float-widget').css({
                    'position': 'relative',
                    'top': '0px',
                });
            }
        });
    </script>
</body>

</html>